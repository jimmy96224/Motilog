<div class="container">

<div class="row justify-content-center">
    <h3><%= @user.goal %></h3>
    <%= flash[:notice] %>
</div>

<div class="row">
  <div class="col-lg-4">

　<%= image_tag @user.get_profile_image(100,100) %>
  <table class="table">
    <tbody>
      <tr>
        <th>name</th>
        <th><%= @user.name %></th>
      </tr>
      <tr>
        <th>profile</th>
        <th><%= @user.profile %></th>
      </tr>
    </tbody>
  </table>

<% if @user == @current_user %>
  <div>
     <%= link_to edit_user_path(@user) do %>
        <button type="button" class="btn btn-outline-secondary btn-block link-secondary"><i class="fas fa-user"></i>
     <% end %>
  </div>
<% end %>

<% if @instrument.present? %>
  <ul style="list-style-type: none;">
    <% @instrument.each do |instrument| %>
      <li>
        <%= link_to user_instrument_path(user_id: instrument.user_id, id: instrument.id) do %>
          <%= image_tag instrument.get_instrument_image(100,100) %>
          <%= instrument.name %>
        <% end %>
      </li>
    <% end %>
  </ul>
<% else %>
  <p>表示するデータがありません。</p>
<% end %>


<% if @user == @current_user %>
  <div>
     <%= link_to new_user_instrument_path(current_user.id) do %>
        <button type="button" class="btn btn-outline-secondary btn-block link-secondary"><i class="fas fa-guitar"></i>
     <% end %>
  </div>
<% end %>
</div>

<div class="col-lg-8">
<% if @user == @current_user %>
<div>
  <%= link_to new_user_diary_path(@user) do %>
    <button type="button" class="btn btn-outline-secondary btn-block link-secondary"><i class="fas fa-book-open"></i>
  <% end %>
</div>
<% end %>

<div class="row mt-3">
    <div class="col-md-8 offset-md-1">
     <h2>練習日誌</h2>
      <table class="table table-hover">
       <thead>
           <tr>
            <th></th>
            <th>楽器</th>
            <th>日付</th>
            <th>タグ</th>
            <th>タイトル</th>
            <th>本文</th>
            <th></th>
           </tr>
       </thead>
        <tbody>
        <% @diaries.each do |diary| %>
           <tr>
               <td>
                  <% if diary.diary_image.attached? %>
                      <%= image_tag diary.get_diary_image(30, 30) %>
                      <% else %>
                  <% end %>
               </td>
               <td>
                 <%= link_to user_instrument_path(user_id: diary.user_id, id: diary.instrument.id) do %>
                   <%= diary.instrument.name %>
                 <% end %>
                </td>
               <td><%= diary.date %></td>
               <td>
                  <% diary.tag_list.each do |tag|%>
                  <div class="btn btn-primary">
                  <%= link_to tag, user_path(id: @user, tag_name: tag, filtered_by_tag: true), class: "text-white" %>
                  </div>
                  <% end %>
               </td>
               <td>
                 <%= link_to user_diary_path(user_id: diary.user_id, id: diary.id) do %>
                   <%=truncate(diary.title, length: 20)%>
                 <% end %>
                </td>
               <td>
                 <%= link_to user_diary_path(user_id: diary.user_id, id: diary.id) do %>
                   <%=truncate(diary.text, length: 20)%>
                 <% end %>
               </td>
               <td>
                 <% if diary.post_comments.present? %>
                   <%= "#{diary.post_comments.count} コメント" %>
                 <% end %>
                 <% if diary.favorites.present? %>
                   <%= diary.favorites.count %> <i class="fas fa-thumbs-up"></i>
                 <% end %>
               </td>
           </tr>
        <% end %>
       </tbody>
      </table>
    </div>
  </div>
</div>
</div>
</div>